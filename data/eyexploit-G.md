# Finding 1

## Validation checks that never fails should be removed

Comptroller.sol#_safeGetAccountSnapshot() is used to returns the supply and borrow balances of user in vToken. It is also assumed to be reverted in case of failure. 


```solidity
    function _safeGetAccountSnapshot(VToken vToken, address user)
        internal
        view
        returns (
            uint256 vTokenBalance,
            uint256 borrowBalance,
            uint256 exchangeRateMantissa
        )
    {
        uint256 err;
        (err, vTokenBalance, borrowBalance, exchangeRateMantissa) = vToken.getAccountSnapshot(user);
        if (err != 0) { 
            revert SnapshotError(address(vToken), user);
        }
        return (vTokenBalance, borrowBalance, exchangeRateMantissa);
    }
```

The function getAccountSnapshot always return default NO_ERROR (aka 0), but the _safeGetAccountSnapshot() above made a check that reverts when a non-zero value return, which is totally reduntant and cost extra gas. 

```solidity
    function getAccountSnapshot(address account)
        external
        view
        override
        returns (
            uint256 error,
            uint256 vTokenBalance,
            uint256 borrowBalance,
            uint256 exchangeRate
        )
    {
        return (NO_ERROR, accountTokens[account], _borrowBalanceStored(account), _exchangeRateStored());
    }
```

**Recommendation**

Modify `_safeGetAccountSnapshot` function to below;
```solidity
    function _safeGetAccountSnapshot(VToken vToken, address user)
        internal
        view
        returns (
            uint256 vTokenBalance,
            uint256 borrowBalance,
            uint256 exchangeRateMantissa
        )
    {
        (, vTokenBalance, borrowBalance, exchangeRateMantissa) = vToken.getAccountSnapshot(user);
        return (vTokenBalance, borrowBalance, exchangeRateMantissa);
    }
```
